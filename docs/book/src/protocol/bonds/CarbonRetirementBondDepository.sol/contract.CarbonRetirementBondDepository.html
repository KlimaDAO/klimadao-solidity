<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js coal">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CarbonRetirementBondDepository - KlimaDAO solidity reference documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="KlimaDAO smart contract docs auto-generated by Foundry Forge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../../favicon.svg">
        <link rel="shortcut icon" href="../../../../favicon.png">
        <link rel="stylesheet" href="../../../../css/variables.css">
        <link rel="stylesheet" href="../../../../css/general.css">
        <link rel="stylesheet" href="../../../../css/chrome.css">
        <link rel="stylesheet" href="../../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../../highlight.css">
        <link rel="stylesheet" href="../../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../../../book.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "coal" : "coal";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('coal')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../../../index.html">Home</a></li><li class="chapter-item expanded affix "><li class="part-title">Contracts</li><li class="chapter-item expanded "><a href="../../../../src/infinity/index.html">❱ infinity</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/facets/index.html">❱ facets</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/facets/Bridges/index.html">❱ Bridges</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/facets/Bridges/C3/index.html">❱ C3</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/facets/Bridges/C3/RedeemC3PoolFacet.sol/contract.RedeemC3PoolFacet.html">RedeemC3PoolFacet</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/Bridges/C3/RetireC3C3TFacet.sol/contract.RetireC3C3TFacet.html">RetireC3C3TFacet</a></li></ol></li><li class="chapter-item "><a href="../../../../src/infinity/facets/Bridges/ICR/index.html">❱ ICR</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/facets/Bridges/ICR/RetireICRFacet.sol/contract.RetireICRFacet.html">RetireICRFacet</a></li></ol></li><li class="chapter-item "><a href="../../../../src/infinity/facets/Bridges/Toucan/index.html">❱ Toucan</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/facets/Bridges/Toucan/RedeemToucanPoolFacet.sol/contract.RedeemToucanPoolFacet.html">RedeemToucanPoolFacet</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/Bridges/Toucan/RetireToucanTCO2Facet.sol/contract.RetireToucanTCO2Facet.html">RetireToucanTCO2Facet</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../../../src/infinity/facets/Retire/index.html">❱ Retire</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/facets/Retire/RetireCarbonFacet.sol/contract.RetireCarbonFacet.html">RetireCarbonFacet</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/Retire/RetireCarbonmarkFacet.sol/contract.RetireCarbonmarkFacet.html">RetireCarbonmarkFacet</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/Retire/RetireInfoFacet.sol/contract.RetireInfoFacet.html">RetireInfoFacet</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/Retire/RetireSourceFacet.sol/contract.RetireSourceFacet.html">RetireSourceFacet</a></li></ol></li><li class="chapter-item "><a href="../../../../src/infinity/facets/DiamondCutFacet.sol/contract.DiamondCutFacet.html">DiamondCutFacet</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/DiamondLoupeFacet.sol/contract.DiamondLoupeFacet.html">DiamondLoupeFacet</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/DustFacet.sol/contract.DustFacet.html">DustFacet</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/ERC1155ReceiverFacet.sol/contract.ERC1155ReceiverFacet.html">ERC1155ReceiverFacet</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/ERC721ReceiverFacet.sol/contract.ERC721ReceiverFacet.html">ERC721ReceiverFacet</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/MetaTransactionsFacet.sol/contract.MetaTransactionsFacet.html">MetaTransactionsFacet</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/OwnershipFacet.sol/contract.OwnershipFacet.html">OwnershipFacet</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/RetirementQuoter.sol/contract.RetirementQuoter.html">RetirementQuoter</a></li><li class="chapter-item "><a href="../../../../src/infinity/facets/TokenFacet.sol/contract.TokenFacet.html">TokenFacet</a></li></ol></li><li class="chapter-item "><a href="../../../../src/infinity/init/index.html">❱ init</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/init/DiamondInit.sol/contract.DiamondInit.html">DiamondInit</a></li><li class="chapter-item "><a href="../../../../src/infinity/init/InitProjectTotals.sol/contract.InitProjectTotals.html">InitProjectTotals</a></li><li class="chapter-item "><a href="../../../../src/infinity/init/_EmptyInit.sol/contract._EmptyInit.html">_EmptyInit</a></li></ol></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IC3.sol/interface.IC3Pool.html">IC3Pool</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IC3.sol/interface.IC3ProjectToken.html">IC3ProjectToken</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IC3.sol/interface.IC3ProjectFactory.html">IC3ProjectFactory</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/ICarbonChain.sol/interface.ICarbonChain.html">ICarbonChain</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/ICarbonmark.sol/interface.ICarbonmark.html">ICarbonmark</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IDiamond.sol/interface.IDiamond.html">IDiamond</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IDiamondCut.sol/interface.IDiamondCut.html">IDiamondCut</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IDiamondLoupe.sol/interface.IDiamondLoupe.html">IDiamondLoupe</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IERC1155Receiver.sol/interface.IERC1155Receiver.html">IERC1155Receiver</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IERC165.sol/interface.IERC165.html">IERC165</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IERC173.sol/interface.IERC173.html">IERC173</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IERC721Receiver.sol/interface.IERC721Receiver.html">IERC721Receiver</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IInternationalCarbonRegistry.sol/interface.ICarbonContractRegistry.html">ICarbonContractRegistry</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IInternationalCarbonRegistry.sol/interface.IProject.html">IProject</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IKlima.sol/interface.IStaking.html">IStaking</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IKlima.sol/interface.IStakingHelper.html">IStakingHelper</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IKlima.sol/interface.IwsKLIMA.html">IwsKLIMA</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IKlima.sol/interface.IKlimaRetirementBond.html">IKlimaRetirementBond</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IKlimaCarbonRetirements.sol/interface.IKlimaCarbonRetirements.html">IKlimaCarbonRetirements</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IKlimaInfinity.sol/interface.IKlimaInfinity.html">IKlimaInfinity</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IToucan.sol/interface.IToucanPool.html">IToucanPool</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IToucan.sol/interface.IToucanCarbonOffsets.html">IToucanCarbonOffsets</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IToucan.sol/interface.IToucanContractRegistry.html">IToucanContractRegistry</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/ITrident.sol/interface.IBentoBoxMinimal.html">IBentoBoxMinimal</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/ITrident.sol/interface.ITridentRouter.html">ITridentRouter</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/ITrident.sol/interface.ITridentPool.html">ITridentPool</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IUniswapV2Pair.sol/interface.IUniswapV2Pair.html">IUniswapV2Pair</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IUniswapV2Router01.sol/interface.IUniswapV2Router01.html">IUniswapV2Router01</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IUniswapV2Router02.sol/interface.IUniswapV2Router02.html">IUniswapV2Router02</a></li><li class="chapter-item "><a href="../../../../src/infinity/interfaces/IWMATIC.sol/interface.IWMATIC.html">IWMATIC</a></li></ol></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/index.html">❱ libraries</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/libraries/Bridges/index.html">❱ Bridges</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/libraries/Bridges/LibC3Carbon.sol/library.LibC3Carbon.html">LibC3Carbon</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/Bridges/LibICRCarbon.sol/library.LibICRCarbon.html">LibICRCarbon</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/Bridges/LibMossCarbon.sol/library.LibMossCarbon.html">LibMossCarbon</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/Bridges/LibToucanCarbon.sol/library.LibToucanCarbon.html">LibToucanCarbon</a></li></ol></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/Token/index.html">❱ Token</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/libraries/Token/LibApprove.sol/library.LibApprove.html">LibApprove</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/Token/LibBalance.sol/library.LibBalance.html">LibBalance</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/Token/LibMatic.sol/library.LibMatic.html">LibMatic</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/Token/LibTransfer.sol/library.LibTransfer.html">LibTransfer</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/Token/LibWmatic.sol/library.LibWmatic.html">LibWmatic</a></li></ol></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/TokenSwap/index.html">❱ TokenSwap</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/libraries/TokenSwap/LibSwap.sol/library.LibSwap.html">LibSwap</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/TokenSwap/LibTreasurySwap.sol/library.LibTreasurySwap.html">LibTreasurySwap</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/TokenSwap/LibTridentSwap.sol/library.LibTridentSwap.html">LibTridentSwap</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/TokenSwap/LibUniswapV2Swap.sol/library.LibUniswapV2Swap.html">LibUniswapV2Swap</a></li></ol></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/LibAppStorage.sol/library.LibAppStorage.html">LibAppStorage</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/LibDiamond.sol/library.LibDiamond.html">LibDiamond</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/LibKlima.sol/library.LibKlima.html">LibKlima</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/LibMeta.sol/library.LibMeta.html">LibMeta</a></li><li class="chapter-item "><a href="../../../../src/infinity/libraries/LibRetire.sol/library.LibRetire.html">LibRetire</a></li></ol></li><li class="chapter-item "><a href="../../../../src/infinity/mocks/index.html">❱ mocks</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/infinity/mocks/ConstantsGetter.sol/contract.ConstantsGetter.html">ConstantsGetter</a></li></ol></li><li class="chapter-item "><a href="../../../../src/infinity/AppStorage.sol/contract.Account.html">Account</a></li><li class="chapter-item "><a href="../../../../src/infinity/AppStorage.sol/contract.Storage.html">Storage</a></li><li class="chapter-item "><a href="../../../../src/infinity/AppStorage.sol/struct.AppStorage.html">AppStorage</a></li><li class="chapter-item "><a href="../../../../src/infinity/C.sol/library.C.html">C</a></li><li class="chapter-item "><a href="../../../../src/infinity/Diamond.sol/contract.Diamond.html">Diamond</a></li><li class="chapter-item "><a href="../../../../src/infinity/ReentrancyGuard.sol/abstract.ReentrancyGuard.html">ReentrancyGuard</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../src/integrations/index.html">❱ integrations</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/index.html">❱ sushixklima</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/interfaces/IUniswapV2Router01.sol/interface.IUniswapV2Router01.html">IUniswapV2Router01</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/interfaces/IUniswapV2Router02.sol/interface.IUniswapV2Router02.html">IUniswapV2Router02</a></li></ol></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/keepers/index.html">❱ keepers</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/keepers/KeeperBase.sol/contract.KeeperBase.html">KeeperBase</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/keepers/KeeperCompatible.sol/abstract.KeeperCompatible.html">KeeperCompatible</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/keepers/KeeperCompatibleInterface.sol/interface.KeeperCompatibleInterface.html">KeeperCompatibleInterface</a></li></ol></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/Ownable.sol/interface.IOwnable.html">IOwnable</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/Ownable.sol/contract.Ownable.html">Ownable</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SushiRouterV02.sol/interface.IUniswapV2Pair.html">IUniswapV2Pair</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SushiRouterV02.sol/library.SafeMathUniswap.html">SafeMathUniswap</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SushiRouterV02.sol/library.UniswapV2Library.html">UniswapV2Library</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SushiRouterV02.sol/library.TransferHelper.html">TransferHelper</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SushiRouterV02.sol/interface.IUniswapV2Router01.html">IUniswapV2Router01</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SushiRouterV02.sol/interface.IUniswapV2Router02.html">IUniswapV2Router02</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SushiRouterV02.sol/interface.IUniswapV2Factory.html">IUniswapV2Factory</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SushiRouterV02.sol/interface.IERC20Uniswap.html">IERC20Uniswap</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SushiRouterV02.sol/interface.IWETH.html">IWETH</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SushiRouterV02.sol/contract.UniswapV2Router02.html">UniswapV2Router02</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SushiswapGreenWrapper.sol/contract.SushiswapGreenSwapWrapper.html">SushiswapGreenSwapWrapper</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SwapRetirementHolder.sol/interface.IKlimaRetirementAggregator.html">IKlimaRetirementAggregator</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SwapRetirementHolder.sol/interface.IWrappedAsset.html">IWrappedAsset</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/SwapRetirementHolder.sol/contract.SwapRetirementHolder.html">SwapRetirementHolder</a></li><li class="chapter-item "><a href="../../../../src/integrations/sushixklima/TestETHSender.sol/contract.testETHSender.html">testETHSender</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../src/protocol/index.html">❱ protocol</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/protocol/allocators/index.html">❱ allocators</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/protocol/allocators/RetirementBondAllocator.sol/contract.RetirementBondAllocator.html">RetirementBondAllocator</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../src/protocol/bonds/index.html">❱ bonds</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../src/protocol/bonds/CarbonRetirementBondDepository.sol/contract.CarbonRetirementBondDepository.html" class="active">CarbonRetirementBondDepository</a></li></ol></li><li class="chapter-item "><a href="../../../../src/protocol/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/protocol/interfaces/IKLIMA.sol/interface.IKlima.html">IKlima</a></li><li class="chapter-item "><a href="../../../../src/protocol/interfaces/IKLIMA.sol/interface.IKlimaTreasury.html">IKlimaTreasury</a></li><li class="chapter-item "><a href="../../../../src/protocol/interfaces/IKLIMA.sol/interface.IKlimaRetirementBond.html">IKlimaRetirementBond</a></li><li class="chapter-item "><a href="../../../../src/protocol/interfaces/IKLIMA.sol/interface.IRetirementBondAllocator.html">IRetirementBondAllocator</a></li><li class="chapter-item "><a href="../../../../src/protocol/interfaces/IKlimaInfinity.sol/interface.IKlimaInfinity.html">IKlimaInfinity</a></li><li class="chapter-item "><a href="../../../../src/protocol/interfaces/IUniswapV2Pair.sol/interface.IUniswapV2Pair.html">IUniswapV2Pair</a></li><li class="chapter-item "><a href="../../../../src/protocol/interfaces/IwsKLIMA.sol/interface.IwsKLIMA.html">IwsKLIMA</a></li></ol></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/index.html">❱ pKLIMA</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/AltExercisepKLIMA.sol/library.SafeERC20.html">SafeERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/AltExercisepKLIMA.sol/library.SafeMath.html">SafeMath</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/AltExercisepKLIMA.sol/library.Address.html">Address</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/AltExercisepKLIMA.sol/interface.IERC20.html">IERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/AltExercisepKLIMA.sol/interface.ITreasury.html">ITreasury</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/AltExercisepKLIMA.sol/interface.IPOLY.html">IPOLY</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/AltExercisepKLIMA.sol/interface.ICirculatingOHM.html">ICirculatingOHM</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/AltExercisepKLIMA.sol/contract.AltExercisepOLY.html">AltExercisepOLY</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/ExercisepKLIMA.sol/library.SafeERC20.html">SafeERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/ExercisepKLIMA.sol/library.SafeMath.html">SafeMath</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/ExercisepKLIMA.sol/library.Address.html">Address</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/ExercisepKLIMA.sol/interface.IERC20.html">IERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/ExercisepKLIMA.sol/interface.ITreasury.html">ITreasury</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/ExercisepKLIMA.sol/interface.IPKLIMA.html">IPKLIMA</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/ExercisepKLIMA.sol/interface.IOldClaimContract.html">IOldClaimContract</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/ExercisepKLIMA.sol/interface.ICirculatingKLIMA.html">ICirculatingKLIMA</a></li><li class="chapter-item "><a href="../../../../src/protocol/pKLIMA/ExercisepKLIMA.sol/contract.ExercisepKLIMA.html">ExercisepKLIMA</a></li></ol></li><li class="chapter-item "><a href="../../../../src/protocol/staking/index.html">❱ staking</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/index.html">❱ regular</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStakingDistributor_v4.sol/library.SafeERC20.html">SafeERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStakingDistributor_v4.sol/library.SafeMath.html">SafeMath</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStakingDistributor_v4.sol/interface.IERC20.html">IERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStakingDistributor_v4.sol/library.Address.html">Address</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStakingDistributor_v4.sol/interface.IPolicy.html">IPolicy</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStakingDistributor_v4.sol/contract.Policy.html">Policy</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStakingDistributor_v4.sol/interface.ITreasury.html">ITreasury</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStakingDistributor_v4.sol/contract.Distributor.html">Distributor</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStaking_v2.sol/library.SafeMath.html">SafeMath</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStaking_v2.sol/interface.IERC20.html">IERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStaking_v2.sol/library.Address.html">Address</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStaking_v2.sol/library.SafeERC20.html">SafeERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStaking_v2.sol/interface.IOwnable.html">IOwnable</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStaking_v2.sol/contract.Ownable.html">Ownable</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStaking_v2.sol/interface.IsKLIMA.html">IsKLIMA</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStaking_v2.sol/interface.IWarmup.html">IWarmup</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStaking_v2.sol/interface.IDistributor.html">IDistributor</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/KlimaStaking_v2.sol/contract.KlimaStaking.html">KlimaStaking</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/StakingHelper.sol/interface.IERC20.html">IERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/StakingHelper.sol/interface.IStaking.html">IStaking</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/StakingHelper.sol/contract.StakingHelper.html">StakingHelper</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/StakingWarmup.sol/interface.IERC20.html">IERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/regular/StakingWarmup.sol/contract.StakingWarmup.html">StakingWarmup</a></li></ol></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/index.html">❱ utils</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaCirculatingSupplyContract.sol/library.SafeMath.html">SafeMath</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaCirculatingSupplyContract.sol/interface.IERC20.html">IERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaCirculatingSupplyContract.sol/contract.KlimaCirculatingSupplyContract.html">KlimaCirculatingSupplyContract</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaTreasury.sol/interface.IBondCalculator.html">IBondCalculator</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaTreasury.sol/interface.IERC20Mintable.html">IERC20Mintable</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaTreasury.sol/interface.IKLIMAERC20.html">IKLIMAERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaTreasury.sol/library.SafeERC20.html">SafeERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaTreasury.sol/interface.IERC20.html">IERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaTreasury.sol/interface.IOwnable.html">IOwnable</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaTreasury.sol/contract.Ownable.html">Ownable</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaTreasury.sol/library.Address.html">Address</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaTreasury.sol/library.SafeMath.html">SafeMath</a></li><li class="chapter-item "><a href="../../../../src/protocol/staking/utils/KlimaTreasury.sol/contract.KlimaTreasury.html">KlimaTreasury</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/index.html">❱ tokens</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/index.html">❱ regular</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/interface.ITWAPOracle.html">ITWAPOracle</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/library.EnumerableSet.html">EnumerableSet</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/interface.IERC20.html">IERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/library.SafeMath.html">SafeMath</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/abstract.ERC20.html">ERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/library.Counters.html">Counters</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/interface.IERC2612Permit.html">IERC2612Permit</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/abstract.ERC20Permit.html">ERC20Permit</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/interface.IOwnable.html">IOwnable</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/contract.Ownable.html">Ownable</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/contract.VaultOwned.html">VaultOwned</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/contract.TWAPOracleUpdater.html">TWAPOracleUpdater</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/contract.Divine.html">Divine</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/KlimaToken.sol/contract.KlimaToken.html">KlimaToken</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken.sol/library.SafeMath.html">SafeMath</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken.sol/library.Address.html">Address</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken.sol/interface.IOwnable.html">IOwnable</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken.sol/contract.Ownable.html">Ownable</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken.sol/interface.IERC20.html">IERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken.sol/abstract.ERC20.html">ERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken.sol/library.Counters.html">Counters</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken.sol/interface.IERC2612Permit.html">IERC2612Permit</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken.sol/abstract.ERC20Permit.html">ERC20Permit</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken.sol/contract.sKlima.html">sKlima</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken_v2.sol/library.SafeMath.html">SafeMath</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken_v2.sol/library.Address.html">Address</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken_v2.sol/interface.IERC20.html">IERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken_v2.sol/abstract.ERC20.html">ERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken_v2.sol/library.Counters.html">Counters</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken_v2.sol/interface.IERC2612Permit.html">IERC2612Permit</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken_v2.sol/abstract.ERC20Permit.html">ERC20Permit</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken_v2.sol/interface.IOwnable.html">IOwnable</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken_v2.sol/contract.Ownable.html">Ownable</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/sKlimaToken_v2.sol/contract.sKLIMAv2.html">sKLIMAv2</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/wsKLIMA.sol/interface.IERC20.html">IERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/wsKLIMA.sol/library.SafeMath.html">SafeMath</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/wsKLIMA.sol/library.Address.html">Address</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/wsKLIMA.sol/contract.ERC20.html">ERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/wsKLIMA.sol/library.SafeERC20.html">SafeERC20</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/wsKLIMA.sol/interface.IsKLIMA.html">IsKLIMA</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/regular/wsKLIMA.sol/contract.wsKLIMA.html">wsKLIMA</a></li></ol></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/upgradeable/index.html">❱ upgradeable</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/protocol/tokens/upgradeable/AlchemistKlimaUpgradeable.sol/contract.AlchemistKlimaUpgradeable.html">AlchemistKlimaUpgradeable</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/upgradeable/AlphaKlimaUpgradeable.sol/contract.AlphaKlimaUpgradeable.html">AlphaKlimaUpgradeable</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/upgradeable/KlimaIDONFT.sol/contract.KlimaIDONFT.html">KlimaIDONFT</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/upgradeable/PreKlimaTokenUpgradeable.sol/contract.PreKlimaTokenUpgradeable.html">PreKlimaTokenUpgradeable</a></li><li class="chapter-item "><a href="../../../../src/protocol/tokens/upgradeable/PreKlimaTokenUpgradeableChild.sol/contract.PreKlimaTokenUpgradeableChild.html">PreKlimaTokenUpgradeableChild</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../src/retirement_v1/index.html">❱ retirement_v1</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IBentoBoxMinimal.sol/interface.IBentoBoxMinimal.html">IBentoBoxMinimal</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IC3Pool.sol/interface.IC3Pool.html">IC3Pool</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IC3ProjectToken.sol/interface.IC3ProjectToken.html">IC3ProjectToken</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/ICarbonChain.sol/interface.ICarbonChain.html">ICarbonChain</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IKlimaCarbonRetirements.sol/interface.IKlimaCarbonRetirements.html">IKlimaCarbonRetirements</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IKlimaInfinity.sol/interface.IKlimaInfinity.html">IKlimaInfinity</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IKlimaRetirementAggregator.sol/interface.IKlimaRetirementAggregator.html">IKlimaRetirementAggregator</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IRetireBridgeCommon.sol/interface.IRetireBridgeCommon.html">IRetireBridgeCommon</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IRetireC3Carbon.sol/interface.IRetireC3Carbon.html">IRetireC3Carbon</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IRetireMossCarbon.sol/interface.IRetireMossCarbon.html">IRetireMossCarbon</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IRetireToucanCarbon.sol/interface.IRetireToucanCarbon.html">IRetireToucanCarbon</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IStaking.sol/interface.IStaking.html">IStaking</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IStakingHelper.sol/interface.IStakingHelper.html">IStakingHelper</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IToucanCarbonOffsets.sol/interface.IToucanCarbonOffsets.html">IToucanCarbonOffsets</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IToucanContractRegistry.sol/interface.IToucanContractRegistry.html">IToucanContractRegistry</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IToucanPool.sol/interface.IToucanPool.html">IToucanPool</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/ITridentPool.sol/interface.ITridentPool.html">ITridentPool</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/ITridentRouter.sol/interface.ITridentRouter.html">ITridentRouter</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IUniswapV2Pair.sol/interface.IUniswapV2Pair.html">IUniswapV2Pair</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IUniswapV2Router01.sol/interface.IUniswapV2Router01.html">IUniswapV2Router01</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IUniswapV2Router02.sol/interface.IUniswapV2Router02.html">IUniswapV2Router02</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/interfaces/IwsKLIMA.sol/interface.IwsKLIMA.html">IwsKLIMA</a></li></ol></li><li class="chapter-item "><a href="../../../../src/retirement_v1/KlimaCarbonRetirements.sol/contract.KlimaCarbonRetirements.html">KlimaCarbonRetirements</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/KlimaRetirementAggregator.sol/contract.KlimaRetirementAggregator.html">KlimaRetirementAggregator</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/RetireC3Carbon.sol/contract.RetireC3Carbon.html">RetireC3Carbon</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/RetireMossCarbon.sol/contract.RetireMossCarbon.html">RetireMossCarbon</a></li><li class="chapter-item "><a href="../../../../src/retirement_v1/RetireToucanCarbon.sol/contract.RetireToucanCarbon.html">RetireToucanCarbon</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">KlimaDAO solidity reference documentation</h1>

                    <div class="right-buttons">
                        <a href="../../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/KlimaDAO/klimadao-solidity" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="carbonretirementbonddepository"><a class="header" href="#carbonretirementbonddepository">CarbonRetirementBondDepository</a></h1>
<p><a href="https://github.com/KlimaDAO/klimadao-solidity/blob/704b462e69030cb9a43680057bee91d745d579ba/src/protocol/bonds/CarbonRetirementBondDepository.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Ownable2Step</p>
<p><strong>Author:</strong>
Cujo</p>
<p>A smart contract that handles the distribution of carbon in exchange for KLIMA tokens.
Bond depositors can only use this to retire carbon by providing KLIMA tokens.</p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="klima"><a class="header" href="#klima">KLIMA</a></h3>
<p>Address of the KLIMA token contract.</p>
<pre><code class="language-solidity">address public constant KLIMA = 0x4e78011Ce80ee02d2c3e649Fb657E45898257815;
</code></pre>
<h3 id="dao"><a class="header" href="#dao">DAO</a></h3>
<p>Address of the DAO multi-sig.</p>
<pre><code class="language-solidity">address public constant DAO = 0x65A5076C0BA74e5f3e069995dc3DAB9D197d995c;
</code></pre>
<h3 id="treasury"><a class="header" href="#treasury">TREASURY</a></h3>
<p>Address of the Treasury contract.</p>
<pre><code class="language-solidity">address public constant TREASURY = 0x7Dd4f0B986F032A44F913BF92c9e8b7c17D77aD7;
</code></pre>
<h3 id="infinity"><a class="header" href="#infinity">INFINITY</a></h3>
<p>address of the Klima Infinity contract.</p>
<pre><code class="language-solidity">address public constant INFINITY = 0x8cE54d9625371fb2a068986d32C85De8E6e995f8;
</code></pre>
<h3 id="fee_divisor"><a class="header" href="#fee_divisor">FEE_DIVISOR</a></h3>
<p>Divisor used for calculating percentages.</p>
<pre><code class="language-solidity">uint256 public constant FEE_DIVISOR = 10_000;
</code></pre>
<h3 id="allocatorcontract"><a class="header" href="#allocatorcontract">allocatorContract</a></h3>
<p>Allocator contract used by policy to fund and close markets.</p>
<pre><code class="language-solidity">address public allocatorContract;
</code></pre>
<h3 id="poolreference"><a class="header" href="#poolreference">poolReference</a></h3>
<p>Mapping that stores the KLIMA/X LP used for quoting price references.</p>
<pre><code class="language-solidity">mapping(address =&gt; address) public poolReference;
</code></pre>
<h3 id="referenceklimaposition"><a class="header" href="#referenceklimaposition">referenceKlimaPosition</a></h3>
<p>Mapping that stores whether the KLIMA is token 0 or token 1 in the LP contract.</p>
<pre><code class="language-solidity">mapping(address =&gt; uint8) public referenceKlimaPosition;
</code></pre>
<h3 id="daofee"><a class="header" href="#daofee">daoFee</a></h3>
<p>Mapping that stores the DAO fee charged for a specific pool token.</p>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public daoFee;
</code></pre>
<h3 id="maxslippage"><a class="header" href="#maxslippage">maxSlippage</a></h3>
<p>Mapping that stores the maximum slippage tolerated for a specific pool token.</p>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public maxSlippage;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="onlyallocator"><a class="header" href="#onlyallocator">onlyAllocator</a></h3>
<p>Modifier to ensure that the calling function is being called by the allocator contract.</p>
<pre><code class="language-solidity">modifier onlyAllocator();
</code></pre>
<h3 id="swaptoexact"><a class="header" href="#swaptoexact">swapToExact</a></h3>
<p>Swaps the specified amount of pool tokens for KLIMA tokens.</p>
<p><em>Only callable by the Infinity contract.</em></p>
<pre><code class="language-solidity">function swapToExact(address poolToken, uint256 poolAmount) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>poolToken</code></td><td><code>address</code></td><td>The pool token address.</td></tr>
<tr><td><code>poolAmount</code></td><td><code>uint256</code></td><td>The amount of pool tokens to swap.</td></tr>
</tbody></table>
</div>
<h3 id="retirecarbondefault"><a class="header" href="#retirecarbondefault">retireCarbonDefault</a></h3>
<p>Retires the specified amount of carbon for the given pool token using KI.</p>
<p><em>Requires KLIMA spend approval for the amount returned by getKlimaAmount()</em></p>
<pre><code class="language-solidity">function retireCarbonDefault(
    address poolToken,
    uint256 retireAmount,
    string memory retiringEntityString,
    address beneficiaryAddress,
    string memory beneficiaryString,
    string memory retirementMessage
) external returns (uint256 retirementIndex);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>poolToken</code></td><td><code>address</code></td><td>The pool token address.</td></tr>
<tr><td><code>retireAmount</code></td><td><code>uint256</code></td><td>The amount of carbon to retire.</td></tr>
<tr><td><code>retiringEntityString</code></td><td><code>string</code></td><td>The string representing the retiring entity.</td></tr>
<tr><td><code>beneficiaryAddress</code></td><td><code>address</code></td><td>The address of the beneficiary.</td></tr>
<tr><td><code>beneficiaryString</code></td><td><code>string</code></td><td>The string representing the beneficiary.</td></tr>
<tr><td><code>retirementMessage</code></td><td><code>string</code></td><td>The message for the retirement.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>retirementIndex</code></td><td><code>uint256</code></td><td>The index of the retirement transaction.</td></tr>
</tbody></table>
</div>
<h3 id="retirecarbonspecific"><a class="header" href="#retirecarbonspecific">retireCarbonSpecific</a></h3>
<p>Retires the specified amount of carbon for the given pool token using KI.
Uses the provided project token for the underlying credit to retire.</p>
<p><em>Requires KLIMA spend approval for the amount returned by getKlimaAmount()</em></p>
<pre><code class="language-solidity">function retireCarbonSpecific(
    address poolToken,
    address projectToken,
    uint256 retireAmount,
    string memory retiringEntityString,
    address beneficiaryAddress,
    string memory beneficiaryString,
    string memory retirementMessage
) external returns (uint256 retirementIndex);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>poolToken</code></td><td><code>address</code></td><td>The pool token address.</td></tr>
<tr><td><code>projectToken</code></td><td><code>address</code></td><td>The project token to retire.</td></tr>
<tr><td><code>retireAmount</code></td><td><code>uint256</code></td><td>The amount of carbon to retire.</td></tr>
<tr><td><code>retiringEntityString</code></td><td><code>string</code></td><td>The string representing the retiring entity.</td></tr>
<tr><td><code>beneficiaryAddress</code></td><td><code>address</code></td><td>The address of the beneficiary.</td></tr>
<tr><td><code>beneficiaryString</code></td><td><code>string</code></td><td>The string representing the beneficiary.</td></tr>
<tr><td><code>retirementMessage</code></td><td><code>string</code></td><td>The message for the retirement.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>retirementIndex</code></td><td><code>uint256</code></td><td>The index of the retirement transaction.</td></tr>
</tbody></table>
</div>
<h3 id="openmarket"><a class="header" href="#openmarket">openMarket</a></h3>
<p>Emits event on market allocation.</p>
<p><em>Only the allocator contract can call this function.</em></p>
<pre><code class="language-solidity">function openMarket(address poolToken) external onlyAllocator;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>poolToken</code></td><td><code>address</code></td><td>The address of the pool token to open the market for.</td></tr>
</tbody></table>
</div>
<h3 id="closemarket"><a class="header" href="#closemarket">closeMarket</a></h3>
<p>Closes the market for a specified pool token by transferring all remaining pool tokens to the treasury address.</p>
<p><em>Only the allocator contract can call this function.</em></p>
<pre><code class="language-solidity">function closeMarket(address poolToken) external onlyAllocator;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>poolToken</code></td><td><code>address</code></td><td>The address of the pool token to close the market for.</td></tr>
</tbody></table>
</div>
<h3 id="updatemaxslippage"><a class="header" href="#updatemaxslippage">updateMaxSlippage</a></h3>
<p>Updates the maximum slippage percentage for a specified pool token.</p>
<pre><code class="language-solidity">function updateMaxSlippage(address poolToken, uint256 _maxSlippage) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>poolToken</code></td><td><code>address</code></td><td>The address of the pool token to update the maximum slippage percentage for.</td></tr>
<tr><td><code>_maxSlippage</code></td><td><code>uint256</code></td><td>The new maximum slippage percentage.</td></tr>
</tbody></table>
</div>
<h3 id="updatedaofee"><a class="header" href="#updatedaofee">updateDaoFee</a></h3>
<p>Updates the DAO fee for a specified pool token.</p>
<pre><code class="language-solidity">function updateDaoFee(address poolToken, uint256 _daoFee) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>poolToken</code></td><td><code>address</code></td><td>The address of the pool token to update the DAO fee for.</td></tr>
<tr><td><code>_daoFee</code></td><td><code>uint256</code></td><td>The new DAO fee.</td></tr>
</tbody></table>
</div>
<h3 id="setpoolreference"><a class="header" href="#setpoolreference">setPoolReference</a></h3>
<p>Sets the reference token for a given pool token. The reference token is used to determine the current price
of the pool token in terms of KLIMA. The position of KLIMA in the Uniswap pair for the reference token is also determined.</p>
<pre><code class="language-solidity">function setPoolReference(address poolToken, address referenceToken) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>poolToken</code></td><td><code>address</code></td><td>The pool token for which to set the reference token.</td></tr>
<tr><td><code>referenceToken</code></td><td><code>address</code></td><td>The reference token for the given pool token.</td></tr>
</tbody></table>
</div>
<h3 id="setallocator"><a class="header" href="#setallocator">setAllocator</a></h3>
<p>Sets the address of the allocator contract. Only the contract owner can call this function.</p>
<pre><code class="language-solidity">function setAllocator(address allocator) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>allocator</code></td><td><code>address</code></td><td>The address of the allocator contract to set.</td></tr>
</tbody></table>
</div>
<h3 id="getklimaamount"><a class="header" href="#getklimaamount">getKlimaAmount</a></h3>
<p>Calculates the amount of KLIMA tokens needed to retire a specified amount of pool tokens for a pool.
The required amount of KLIMA tokens is calculated based on the current market price of the pool token and the amount of pool tokens to be retired.
If the raw amount needed from the dex exceeds slippage, than the limited amount is returned.</p>
<pre><code class="language-solidity">function getKlimaAmount(uint256 poolAmount, address poolToken) public view returns (uint256 klimaNeeded);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>poolAmount</code></td><td><code>uint256</code></td><td>The amount of pool tokens to retire.</td></tr>
<tr><td><code>poolToken</code></td><td><code>address</code></td><td>The address of the pool token to retire.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>klimaNeeded</code></td><td><code>uint256</code></td><td>The amount of KLIMA tokens needed to retire the specified amount of pool tokens.</td></tr>
</tbody></table>
</div>
<h3 id="_transferandburnklima"><a class="header" href="#_transferandburnklima">_transferAndBurnKlima</a></h3>
<p>Transfers and burns a specified amount of KLIMA tokens.
A fee is also transferred to the DAO address based on the fee divisor and the configured fee for the pool token.</p>
<p><em>On extremely small quote amounts this can result in zero</em></p>
<pre><code class="language-solidity">function _transferAndBurnKlima(uint256 totalKlima, address poolToken) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>totalKlima</code></td><td><code>uint256</code></td><td>The total amount of KLIMA tokens to transfer and burn.</td></tr>
<tr><td><code>poolToken</code></td><td><code>address</code></td><td>The address of the pool token to burn KLIMA tokens for.</td></tr>
</tbody></table>
</div>
<h3 id="getmarketquote"><a class="header" href="#getmarketquote">getMarketQuote</a></h3>
<p>Returns the current market price of the pool token in terms of KLIMA tokens.</p>
<p><em>Currently all KLIMA LP contracts safely interact with the IUniswapV2Pair abi.</em></p>
<pre><code class="language-solidity">function getMarketQuote(address poolToken, uint256 amountOut) internal view returns (uint256 currentPrice);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>poolToken</code></td><td><code>address</code></td><td>The address of the pool token to get the market quote for.</td></tr>
<tr><td><code>amountOut</code></td><td><code>uint256</code></td><td>The amount of pool tokens to get the market quote for.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>currentPrice</code></td><td><code>uint256</code></td><td>The current market price of the pool token in terms of KLIMA tokens.</td></tr>
</tbody></table>
</div>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="allocatorchanged"><a class="header" href="#allocatorchanged">AllocatorChanged</a></h3>
<pre><code class="language-solidity">event AllocatorChanged(address oldAllocator, address newAllocator);
</code></pre>
<h3 id="poolreferencechanged"><a class="header" href="#poolreferencechanged">PoolReferenceChanged</a></h3>
<pre><code class="language-solidity">event PoolReferenceChanged(address pool, address oldLp, address newLp);
</code></pre>
<h3 id="referenceklimapositionchanged"><a class="header" href="#referenceklimapositionchanged">ReferenceKlimaPositionChanged</a></h3>
<pre><code class="language-solidity">event ReferenceKlimaPositionChanged(address lp, uint8 oldPosition, uint8 newPosition);
</code></pre>
<h3 id="daofeechanged"><a class="header" href="#daofeechanged">DaoFeeChanged</a></h3>
<pre><code class="language-solidity">event DaoFeeChanged(address pool, uint256 oldFee, uint256 newFee);
</code></pre>
<h3 id="poolslippagechanged"><a class="header" href="#poolslippagechanged">PoolSlippageChanged</a></h3>
<pre><code class="language-solidity">event PoolSlippageChanged(address pool, uint256 oldSlippage, uint256 newSlippage);
</code></pre>
<h3 id="marketopened"><a class="header" href="#marketopened">MarketOpened</a></h3>
<pre><code class="language-solidity">event MarketOpened(address pool, uint256 amount);
</code></pre>
<h3 id="marketclosed"><a class="header" href="#marketclosed">MarketClosed</a></h3>
<pre><code class="language-solidity">event MarketClosed(address pool, uint256 amount);
</code></pre>
<h3 id="carbonbonded"><a class="header" href="#carbonbonded">CarbonBonded</a></h3>
<pre><code class="language-solidity">event CarbonBonded(address pool, uint256 poolAmount);
</code></pre>
<h3 id="klimabonded"><a class="header" href="#klimabonded">KlimaBonded</a></h3>
<pre><code class="language-solidity">event KlimaBonded(uint256 daoFee, uint256 klimaBurned);
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../../src/protocol/bonds/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../../../src/protocol/interfaces/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../../src/protocol/bonds/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../../../src/protocol/interfaces/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../../elasticlunr.min.js"></script>
        <script src="../../../../mark.min.js"></script>
        <script src="../../../../searcher.js"></script>

        <script src="../../../../clipboard.min.js"></script>
        <script src="../../../../highlight.js"></script>
        <script src="../../../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../../../solidity.min.js"></script>


    </div>
    </body>
</html>
